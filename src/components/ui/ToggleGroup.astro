---
interface Option {
	value: string;
	label: string;
}

interface Props {
	/** Unique name for the radio group */
	name: string;
	/** Array of options with value and label */
	options: Option[];
	/** Initially selected value */
	defaultValue?: string;
	/** Additional class for the container */
	class?: string;
	/** Accessible label for the radio group */
	ariaLabel: string;
}

const { name, options, defaultValue, class: className, ariaLabel } = Astro.props;
const selectedValue = defaultValue ?? options[0]?.value;
---

<div
	class={`toggle-group ${className ?? ''}`}
	role="radiogroup"
	data-toggle-group={name}
	aria-label={ariaLabel}
>
	{options.map((option) => (
		<label class="toggle-option">
			<input
				type="radio"
				name={name}
				value={option.value}
				checked={option.value === selectedValue}
				class="sr-only"
			/>
			<span class="toggle-label">{option.label}</span>
		</label>
	))}
</div>

<script>
	import { initToggleGroups } from '../../lib/ui/toggle-group';

	// Single delegated listener for all toggle groups
	initToggleGroups();
</script>
